{{ define "main" }}
<div class="homepage">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">Linux Beyond the Terminal</h1>
      <p class="hero-subtitle">Stories about how Linux is quietly reshaping government, work, education, and everyday life.</p>
      <p class="hero-description">LinuxDive explores Linux as a cultural, institutional, and economic force—not just code, but the decisions, communities, and moments that prove it matters.</p>
    </div>
  </section>

  <!-- Primary Featured Article -->
  {{ $featured := where .Site.RegularPages "Params.featured" true }}
  {{ if $featured }}
    {{ with index $featured 0 }}
    <section class="primary-featured">
      <article class="featured-article-main">
        {{ if .Params.featured_image }}
          <div class="featured-image-large">
            <img src="{{ .Params.featured_image | relURL }}" alt="{{ .Title }}">
          </div>
        {{ end }}
        <div class="featured-content-main">
          <h2>{{ .Title }}</h2>
          <div class="article-meta">
            <time datetime="{{ .Date.Format "2006-01-02" }}">
              {{ .Date.Format "January 2, 2006" }}
            </time>
            {{ if .Params.author }}
              <span class="author">By {{ .Params.author }}</span>
            {{ end }}
          </div>
          <p class="article-excerpt">{{ .Summary | plainify }}</p>
          <a href="{{ .RelPermalink }}" class="read-link">Read article →</a>
        </div>
      </article>
    </section>
    {{ end }}
  {{ end }}

  <!-- Section Preview Blocks -->
  
  <!-- Society Section -->
  {{ with .Site.GetPage "/society" }}
    {{ $articles := where (where .Site.RegularPages "Section" "society") "Params.draft" false }}
    {{ if $articles }}
      <section class="section-preview">
        <div class="section-header">
          <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          <p class="section-preview-desc">{{ .Params.description }}</p>
        </div>
        <div class="section-preview-articles">
          {{ range first 6 $articles }}
            <article class="preview-article-card">
              {{ if .Params.featured_image }}
                <div class="preview-image">
                  <img src="{{ .Params.featured_image | relURL }}" alt="{{ .Title }}">
                </div>
              {{ end }}
              <div class="preview-content">
                <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
                <time datetime="{{ .Date.Format "2006-01-02" }}" class="preview-date">
                  {{ .Date.Format "Jan 2, 2006" }}
                </time>
              </div>
            </article>
          {{ end }}
        </div>
        <a href="{{ .RelPermalink }}" class="view-all-link">View all articles →</a>
      </section>
    {{ end }}
  {{ end }}

  <!-- Work Section -->
  {{ with .Site.GetPage "/work" }}
    {{ $articles := where (where .Site.RegularPages "Section" "work") "Params.draft" false }}
    {{ if $articles }}
      <section class="section-preview">
        <div class="section-header">
          <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          <p class="section-preview-desc">{{ .Params.description }}</p>
        </div>
        <div class="section-preview-articles">
          {{ range first 6 $articles }}
            <article class="preview-article-card">
              {{ if .Params.featured_image }}
                <div class="preview-image">
                  <img src="{{ .Params.featured_image | relURL }}" alt="{{ .Title }}">
                </div>
              {{ end }}
              <div class="preview-content">
                <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
                <time datetime="{{ .Date.Format "2006-01-02" }}" class="preview-date">
                  {{ .Date.Format "Jan 2, 2006" }}
                </time>
              </div>
            </article>
          {{ end }}
        </div>
        <a href="{{ .RelPermalink }}" class="view-all-link">View all articles →</a>
      </section>
    {{ end }}
  {{ end }}

  <!-- Culture Section -->
  {{ with .Site.GetPage "/culture" }}
    {{ $articles := where (where .Site.RegularPages "Section" "culture") "Params.draft" false }}
    {{ if $articles }}
      <section class="section-preview">
        <div class="section-header">
          <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          <p class="section-preview-desc">{{ .Params.description }}</p>
        </div>
        <div class="section-preview-articles">
          {{ range first 6 $articles }}
            <article class="preview-article-card">
              {{ if .Params.featured_image }}
                <div class="preview-image">
                  <img src="{{ .Params.featured_image | relURL }}" alt="{{ .Title }}">
                </div>
              {{ end }}
              <div class="preview-content">
                <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
                <time datetime="{{ .Date.Format "2006-01-02" }}" class="preview-date">
                  {{ .Date.Format "Jan 2, 2006" }}
                </time>
              </div>
            </article>
          {{ end }}
        </div>
        <a href="{{ .RelPermalink }}" class="view-all-link">View all articles →</a>
      </section>
    {{ end }}
  {{ end }}

  <!-- Everyday Section -->
  {{ with .Site.GetPage "/everyday" }}
    {{ $articles := where (where .Site.RegularPages "Section" "everyday") "Params.draft" false }}
    {{ if $articles }}
      <section class="section-preview">
        <div class="section-header">
          <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          <p class="section-preview-desc">{{ .Params.description }}</p>
        </div>
        <div class="section-preview-articles">
          {{ range first 6 $articles }}
            <article class="preview-article-card">
              {{ if .Params.featured_image }}
                <div class="preview-image">
                  <img src="{{ .Params.featured_image | relURL }}" alt="{{ .Title }}">
                </div>
              {{ end }}
              <div class="preview-content">
                <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
                <time datetime="{{ .Date.Format "2006-01-02" }}" class="preview-date">
                  {{ .Date.Format "Jan 2, 2006" }}
                </time>
              </div>
            </article>
          {{ end }}
        </div>
        <a href="{{ .RelPermalink }}" class="view-all-link">View all articles →</a>
      </section>
    {{ end }}
  {{ end }}
</div>
{{ end }}
